@if (dataSource.data.length != 0) {
    <table mat-table [dataSource]="dataSource" multiTemplateDataRows>
    
        <!--- Note that these columns can be defined in any order.
                            The actual rendered columns are set as a property on the row definition" -->
    
        <!-- invoiceId Column -->
        <ng-container matColumnDef="className">
            <th mat-header-cell *matHeaderCellDef> Class </th>
            <td mat-cell *matCellDef="let element"> {{element.className}} </td>
        </ng-container>
    
        <!-- purpose Column paymentName-->
        <ng-container matColumnDef="actualAmount">
            <th mat-header-cell *matHeaderCellDef> Actual Amount </th>
            <td mat-cell *matCellDef="let element"> {{element.actualAmount}} </td>
        </ng-container>
    
        <!-- Amount Column -->
        <ng-container matColumnDef="receivedAmount">
            <th mat-header-cell *matHeaderCellDef> Received Amount </th>
            <td mat-cell *matCellDef="let element"> {{element.receivedAmount}} </td>
        </ng-container>
    
        <!-- Amount Column -->
        <ng-container matColumnDef="pendingAmount">
            <th mat-header-cell *matHeaderCellDef> Pending Amount </th>
            <td mat-cell *matCellDef="let element"> {{element.pendingAmount}} </td>
        </ng-container>

          <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="4">
            <div class="example-element-detail"
                [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                <form class="row" [formGroup]="classWiseFormGroup">
                    <!-- <div class="col-lg-3 col-md-6 col-sm-12">
                        <mat-form-field appearance="outline">
                            <mat-label>Grade/Class</mat-label>
                            <mat-select formControlName="className">
                                @for (class of classList; track class) {
                                <mat-option [value]="class.value">{{class.label}}</mat-option>
                                }
                            </mat-select>
                            @if (classWiseForm['className'].errors &&
                            classWiseForm['className'].errors['required'] &&
                            classWiseForm['className'].touched) {
                            <mat-error>Class is required.</mat-error>
                            }
                        </mat-form-field>
                    </div> -->
                    <div class="col-lg-3 col-md-6 col-sm-12">
                        <mat-form-field appearance="outline">
                            <mat-label>Section</mat-label>
                            <mat-select formControlName="section">
                                @for (section of sectionList; track section) {
                                <mat-option [value]="section.value">{{section.label}}</mat-option>
                                }
                            </mat-select>
                            @if (classWiseForm['section'].errors &&
                            classWiseForm['section'].errors['required'] &&
                            classWiseForm['section'].touched) {
                            <mat-error>section is required.</mat-error>
                            }
                        </mat-form-field>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-12">
                        <mat-form-field appearance="outline">
                            <mat-label>Academic Year</mat-label>
                            <mat-select formControlName="academicYearId">
                                @for (academic of academicList; track academic) {
                                <mat-option [value]="academic.value">{{academic.label}}</mat-option>
                                }
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-12">
                        <mat-form-field appearance="outline">
                            <mat-label>Payment Type</mat-label>
                            <mat-select formControlName="PaymentAllotmentId" multiple>
                                @for (name of paymentsFeeList; track name) {
                                    <mat-option [value]="name.id">{{name.paymentName}}</mat-option>
                                }
                            </mat-select>
                            @if (classWiseForm['PaymentAllotmentId'].errors &&
                            classWiseForm['PaymentAllotmentId'].errors['required'] &&
                            classWiseForm['PaymentAllotmentId'].touched) {
                            <mat-error>Payment Type is required.</mat-error>
                            }
                        </mat-form-field>
                    </div>
                </form>
            </div>
            </td>
        </ng-container>
    
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"
        [class.example-expanded-row]="expandedElement === row"
        (click)="expandedElement = expandedElement === row ? null : row; classWiseStudentRecord(row)"></tr>

        <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
    </table>
    }
    @if(dataSource.data.length == 0){
    <div class="no-record">No Records Found</div>
    }