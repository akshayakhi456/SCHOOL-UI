<div class="box">
    <div class="box-body">
        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-12">
                <mat-form-field appearance="outline">
                    <mat-label>Class</mat-label>
                    <input matInput [formControl]="class"/>
                </mat-form-field>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-12">
                <mat-form-field appearance="outline">
                    <mat-label>Section</mat-label>
                    <input matInput [formControl]="section"/>
                </mat-form-field>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-12">
                <button class="btn btn-primary">Filter</button>
            </div>
        </div>
    </div>
</div>

<div class="box">
    <div class="box-body">
        <div class="row">
            <table mat-table [dataSource]="dataSource" class="table-responsive">
                @for(column of displayedColumns; track column; let i=$index) {
                <ng-container [matColumnDef]="column" [sticky]="column == 'rollNo' || column == 'name'">
                  <th mat-header-cell *matHeaderCellDef> 
                    <div> {{column}} </div> <br/>
                    @if (column !== 'rollNo' && column !== 'name'){
                        <div>({{getWeekOfDay(column)}})</div> 
                    }
                  </th>
                  <td mat-cell *matCellDef="let element;let j = index" [attr.colspan]="getWeekOfDay(column) !== 'Saturday' && getWeekOfDay(column) !== 'Sunday' ? 0 : 1"> 
                    @if (column == 'rollNo' || column == 'name'){
                        {{ element[column] }} 
                    }
                    @else {
                        @if (getWeekOfDay(column) !== 'Sunday'){
                            <!-- <mat-checkbox [(ngModel)]="element[column].AF"></mat-checkbox>
                            <mat-checkbox [(ngModel)]="element[column].BF"></mat-checkbox> -->
                            <div class="checkbox-container">
                                <input type="radio" id="checkbox{{j}}{{i}}1" name="checkbox{{j}}{{i}}" class="hidden-checkbox">
                                <label for="checkbox{{j}}{{i}}1" class="checkbox-label green">P</label>
                            </div>
                            <div class="checkbox-container ms-1">
                                <input type="radio" id="checkbox{{j}}{{i}}2" name="checkbox{{j}}{{i}}" class="hidden-checkbox">
                                <label for="checkbox{{j}}{{i}}2" class="checkbox-label red">A</label>
                            </div>
                            <div class="checkbox-container ms-1">
                                <input type="radio" id="checkbox{{j}}{{i}}3" name="checkbox{{j}}{{i}}" class="hidden-checkbox">
                                <label for="checkbox{{j}}{{i}}3" class="checkbox-label yellow">HD</label>
                            </div>
                        }
                    }
                  </td>
                </ng-container>
                }
                <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
            </table>              
        </div>
    </div>
</div>