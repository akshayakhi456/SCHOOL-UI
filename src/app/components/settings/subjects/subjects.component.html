<div class="section-form mt-2">
    <mat-form-field appearance="outline">
        <mat-label>Subject Name</mat-label>
        <input matInput [formControl]="subjectName"/>
        @if (subjectName.invalid && subjectName.touched) {
            <mat-error>Subject Name is Required.</mat-error>
        }
    </mat-form-field>
    <button class="btn btn-primary" (click)="saveSubject()">Save</button>
</div>
<div>
    <table mat-table [dataSource]="subjectDataSource" matSort #sectionSort (matSortChange)="announceSortChange($event)">

        <!-- Class Column -->
        <ng-container matColumnDef="subjectName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by name">
                Subject
            </th>
            <td mat-cell *matCellDef="let element">
                @if (!element.isEditSubjectMode) {
                    {{element.subjectName}}
                }
                @else {
                    <mat-form-field appearance="outline">
                        <input matInput [value]="element.subjectName" [(ngModel)]="element.subjectName"/>
                    </mat-form-field>
                }
            </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>
                Action
            </th>
            <td mat-cell *matCellDef="let element">
                @if (element.isEditSubjectMode) {
                    <button class="btn btn-primary" (click)="updateSubject(element)">Save</button>
                    <button class="btn btn-light ms-1" (click)="element.isEditSubjectMode = !element.isEditSubjectMode">Cancel</button>
                }
                @else {
                    <button class="btn btn-primary" (click)="element.isEditSubjectMode = !element.isEditSubjectMode">Edit Subject</button>
                }
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedSubjectColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedSubjectColumns;"></tr>
    </table>
</div>